
{{#partial "customCSS"}}
    <!-- Data Tables -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css"
      crossorigin="anonymous"
    />
{{/partial}}


<!-- Page Title -->
{{#partial "pageTitle"}}
  <title>Rescate Patitas | {{i18n.featuresViewTitle}}</title>
{{/partial}}

{{#partial "content"}}
  <main class="pt-3 mt-3 overflow-auto">
      <!-- Panel Toolbar-->
    <div class="mb-4 bg-light rounded-3 align-content-center text-center">
        <div class="container-fluid py-5">
          <h1 class="display-5 fw-bold">{{i18n.featuresTitleHeader}}</h1>
          <p>{{i18n.featuresViewText}}</p>
        </div>
    </div>
     <div class="container">
       <!-- Table -->
        <table
          id="dataTable"
          class="table table-striped table-borderless mt-3 mb-3"
          style="width: 100%"
        >
         <!-- Column Headers -->
          <thead>
            <tr>
              <th scope="col">{{i18n.feature}}</th>
            </tr>
          </thead>
          <tbody>
            <!-- Data rows -->
            {{#caracteristicas}}
            <tr>
              <td>
                <!-- Sorter property -->
                <span style="display:none">{{valor}}</span>
                <!-- Form for edit/delete-->
                <form class="form-horizontal" id="form-feature-{{id}}" action="/features/{{id}}" method="POST">
                  <div class="form-floating input-group">
                    <!-- Control for delete or edit an entry -->
                    <input name="delete" type="hidden" value="false" id="delete-{{id}}">
                    <!-- Value input -->
                    <input
                      name="valor"
                      type="text"
                      class="form-control"
                      placeholder="An existing feature"
                      value="{{valor}}"
                      required="true"
                    />
                    <label for="newFeature">{{i18n.edit}} {{i18n.feature}}</label>
                    <!-- Edit button -->
                    <span class="input-group-text">
                      <button class="btn btn-primary" type="submit">
                        <i class="fa fa-edit" aria-hidden="true"></i></button
                    ></span>
                    <!-- Delete button -->
                    <span class="input-group-text">
                      <button class="btn btn-outline-danger" type="submit" onclick="onBeforeSubmit({{id}})">
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </span>
                  </div>
                </form>
              </td>
            </tr>
            {{/caracteristicas}}
          </tbody>
        </table>
        <form class="mt-5" action="/features" method="POST">
          <div class="form-floating input-group">
            <input
              name="valor"
              type="text"
              class="form-control"
              id="newFeature"
              placeholder="New Feature"
              required="true"
            />
            <label for="newFeature">{{i18n.addFeaturePh}}</label>
            <span class="input-group-text">
              <button class="btn btn-primary" type="submit">
                <i class="fa fa-plus" aria-hidden="true"></i></button
            ></span>
            <span class="input-group-text">
              <button class="btn btn-outline-primary" type="reset">
                <i class="fa fa-undo" aria-hidden="true"></i>
              </button>
            </span>
          </div>
        </form>
      </div>
  </main>
{{/partial}}

{{#partial "customJS"}}
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- JQuery Datatables-->
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <!-- Boostrap DataTables -->
    <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
    <!-- Mandatory DataTable Start-->
    <script>
      // dataTable translations
      $(document).ready(function () {
        if(!navigator.language.startsWith("en")){
          $("#dataTable").DataTable({
              language: {
                url: `/locales/datatable.${navigator.language}.json`,
            },
          });}
        else{
          $("#dataTable").DataTable();
        }
      });

      onBeforeSubmit = function(id){
          document.getElementById(`delete-${id}`).value = true;
         $(`#form-feature-${id}`).submit();
      }
    </script>
{{/partial}}

{{> layout/LAYOUT-navbar.html.hbs }}
